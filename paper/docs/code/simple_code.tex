% Remember to use the lgrind style

\Head{}
\File{simple}{2004}{4}{28}{3:23}{9563}
\L{\LB{\C{}\#!/usr/bin/perl_-w\CE{}}}
\L{\LB{\V{use}_\V{Getopt}::\V{Std};}}
\L{\LB{\N{\$command}\V{\_line}_=_\N{\$0};}}
\L{\LB{\K{foreach}_(@\V{ARGV})_\{_\N{\$command}\V{\_line}_.=_\S{}\3_\$\_\3\SE{};_\}}}
\L{\LB{}}
\L{\LB{\C{}\#_-------------------------------------------------------\CE{}}}
\L{\LB{\C{}\#_}\Tab{40}{Do_the_options\CE{}}}
\L{\LB{\C{}\#_-------------------------------------------------------\CE{}}}
\L{\LB{}}
\L{\LB{\V{my}_\%\V{options}=();}}
\L{\LB{\V{getopts}(\S{}\3c:L:ihlm:M:s\3\SE{},\2\%\V{options});}}
\L{\LB{}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3h\3\SE{}\})_\|\,\|_(\V{scalar}(@\V{ARGV})_==_\N{0}))}}
\L{\LB{\{}}
\L{\LB{}\Tab{8}{\K{die}_(\S{}\3simple_[options]_sort\2noptions_are:\2n\2t}}
\L{\LB{}\Tab{16}{\-c_comment_\-_comment_with_which_to_name_log\2n\2t}}
\L{\LB{}\Tab{16}{\-l_list_commands_simple_will_execute\2n\2t}}
\L{\LB{}\Tab{16}{\-s_do_a_short_run\2n\2t}}
\L{\LB{}\Tab{16}{\-h_this_help_message\2n\2t}}
\L{\LB{}\Tab{16}{\-L_length_\-_cache_line_length\2n\2t}}
\L{\LB{}\Tab{16}{\-i_just_count_instructions\2n\2t}}
\L{\LB{}\Tab{16}{\-m_\-_specify_minimum_sort_size\2n\2t}}
\L{\LB{}\Tab{16}{\-M_\-_specify_maximum_sort_size\2n\3\SE{});}}
\L{\LB{\}}}
\L{\LB{}}
\L{\LB{\C{}\#_i_means_just_get_an_instruction_count,_nothing_else\CE{}}}
\L{\LB{\N{\$just}\V{\_instruction}_=_\N{0};}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3i\3\SE{}\}))_\{_\N{\$just}\V{\_instruction}_=_\N{1};_\}_}}
\L{\LB{}}
\L{\LB{\C{}\#redfine_the_max_and_minimum_number_of_items\CE{}}}
\L{\LB{\N{\$min}\V{\_num\_items}_=_\N{4096};}}
\L{\LB{\N{\$max}\V{\_num\_items}_=_\N{4194304};}}
\L{\LB{}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3m\3\SE{}\}))_\{_\N{\$min}\V{\_num\_items}_=_\N{\$options}\{\S{}\3m\3\SE{}\};_\}}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3M\3\SE{}\}))_\{_\N{\$max}\V{\_num\_items}_=_\N{\$options}\{\S{}\3M\3\SE{}\};_\}}}
\L{\LB{}}
\L{\LB{\N{\$$\ell$ine}\V{\_length}_=_\N{32};\C{}_\#_the_length_of_a_cache_line\CE{}}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3L\3\SE{}\}))_\{_\N{\$$\ell$ine}\V{\_length}_=_\N{\$options}\{\S{}\3L\3\SE{}\};_\}}}
\L{\LB{}}
\L{\LB{\C{}\#_check_if_a_short_run_is_desired\CE{}}}
\L{\LB{\N{\$short}\V{\_run}_=_\N{0};}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3s\3\SE{}\}))_\{_\N{\$short}\V{\_run}_=_\N{1};_\}}}
\L{\LB{}}
\L{\LB{\C{}\#_check_if_just_the_list_of_commands_is_wanted\CE{}}}
\L{\LB{\N{\$just}\V{\_list}_=_\N{0};}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3l\3\SE{}\}))_\{_\N{\$just}\V{\_list}_=_\N{1};_\}}}
\L{\LB{}}
\L{\LB{\C{}\#_set_the_comment\CE{}}}
\L{\LB{\N{\$comment}_=_\K{localtime}();}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3c\3\SE{}\}))_\{_\N{\$comment}_=_\N{\$options}\{\S{}\3c\3\SE{}\};_\}}}
\L{\LB{\N{\$comment}_=\~{}_\K{s}/[\2\K{s}:]/\V{\_}/\V{g};}}
\L{\LB{}}
\L{\LB{\C{}\#_----------------------------------------------------------\CE{}}}
\L{\LB{\C{}\#_}\Tab{56}{set_the_constants\CE{}}}
\L{\LB{\C{}\#_----------------------------------------------------------\CE{}}}
\L{\LB{}}
\L{\LB{\C{}\#_the_simulator_details\CE{}}}
\L{\LB{@\V{simulators}_=_(_\S{}\3sim\-cache\3\SE{},_\S{}\3sim\-bpred\3\SE{}_)_;}}
\L{\LB{}}
\L{\LB{\C{}\#_put_in_the_keywords\CE{}}}
\L{\LB{\N{\$keywords}\{\S{}\3sim\-cache\3\SE{}\}_=_}}
\L{\LB{}\Tab{8}{[}}
\L{\LB{}\Tab{16}{\S{}\3sim\_num\_insn\3\SE{},_\S{}\3sim\_num\_refs\3\SE{},_\S{}\3dl1.accesses\3\SE{},_\S{}\3dl1.hits\3\SE{},}}
\L{\LB{}\Tab{16}{\S{}\3dl1.misses\3\SE{},_\S{}\3dl1.replacements\3\SE{},_\S{}\3dl1.writebacks\3\SE{},_\S{}\3dl1.miss\_rate\3\SE{},}}
\L{\LB{}\Tab{16}{\S{}\3dl1.repl\_rate\3\SE{},_\S{}\3dl2.accesses\3\SE{},_\S{}\3dl2.hits\3\SE{},_\S{}\3dl2.misses\3\SE{},}}
\L{\LB{}\Tab{16}{\S{}\3dl2.replacements\3\SE{},_\S{}\3dl2.writebacks\3\SE{},_\S{}\3dl2.miss\_rate\3\SE{},_\S{}\3dl2.repl\_rate\3\SE{},}}
\L{\LB{}\Tab{16}{\S{}\3mem.page\_mem\3\SE{}}}
\L{\LB{}\Tab{8}{];}}
\L{\LB{\N{\$keywords}\{\S{}\3sim\-bpred\3\SE{}\}_=_}}
\L{\LB{}\Tab{8}{[}}
\L{\LB{}\Tab{16}{\S{}\3sim\_num\_branches\3\SE{},_\S{}\3sim\_IPB\3\SE{},_\S{}\3bpred\_bimod.lookups\3\SE{},}}
\L{\LB{}\Tab{16}{\S{}\3bpred\_bimod.updates\3\SE{},_\S{}\3bpred\_bimod.addr\_hits\3\SE{},_\S{}\3bpred\_bimod.dir\_hits\3\SE{},}}
\L{\LB{}\Tab{16}{\S{}\3bpred\_bimod.misses\3\SE{},_\S{}\3bpred\_bimod.bpred\_addr\_rate\3\SE{},}}
\L{\LB{}\Tab{16}{\S{}\3bpred\_bimod.bpred\_dir\_rate\3\SE{},_\S{}\3bpred\_2lev.lookups\3\SE{},}}
\L{\LB{}\Tab{16}{\S{}\3bpred\_2lev.updates\3\SE{},_\S{}\3bpred\_2lev.addr\_hits\3\SE{},_\S{}\3bpred\_2lev.dir\_hits\3\SE{},}}
\L{\LB{}\Tab{16}{\S{}\3bpred\_2lev.misses\3\SE{},_\S{}\3bpred\_2lev.bpred\_addr\_rate\3\SE{},}}
\L{\LB{}\Tab{16}{\S{}\3bpred\_2lev.bpred\_dir\_rate\3\SE{}}}
\L{\LB{}\Tab{8}{];}}
\L{\LB{}}
\L{\LB{\C{}\#\<name\>:\<nsets\>:\<bsize\>:\<assoc\>:\<repl\>\CE{}}}
\L{\LB{\C{}\#_cache_sizes_are_2_and_4_MB,_with_a_line_size_of_32_Bytes.\CE{}}}
\L{\LB{\C{}\#_This_mean_either_the_associativity_or_\#sets_is_65536/131072_and_l1_is_256.\CE{}}}
\L{\LB{\C{}\#_we_make_l1_FA\CE{}}}
\L{\LB{}}
\L{\LB{\N{\$size}\V{\_4\_meg}_=_\N{4}_*_\N{1024}_*_\N{1024}_/_\N{\$$\ell$ine}\V{\_length};}}
\L{\LB{\N{\$size}\V{\_2\_meg}_=_\N{2}_*_\N{1024}_*_\N{1024}_/_\N{\$$\ell$ine}\V{\_length};}}
\L{\LB{\N{\$size}\V{\_8\_k}_=_\N{8}_*_\N{1024}_/_\N{\$$\ell$ine}\V{\_length};}}
\L{\LB{}}
\L{\LB{\N{\$params}\{\S{}\3sim\-cache\3\SE{}\}[\N{0}]_=_\S{}\3\-cache:dl1_dl1:\$size\_8\_k:\$line\_length:1:l}}
\L{\LB{}\Tab{16}{\-cache:dl2_dl2:\$size\_4\_meg:\$line\_length:1:l}}
\L{\LB{}\Tab{16}{\-cache:il1_il1:\$size\_8\_k:\$line\_length:1:l_\-cache:il2_dl2\3\SE{};_}}
\L{\LB{}\Tab{8}{}}
\L{\LB{\N{\$params}\{\S{}\3sim\-cache\3\SE{}\}[\N{1}]_=_\S{}\3\-cache:dl1_dl1:\$size\_8\_k:\$line\_length:1:l}}
\L{\LB{}\Tab{16}{\-cache:dl2_dl2:\$size\_2\_meg:\$line\_length:1:l}}
\L{\LB{}\Tab{16}{\-cache:il1_il1:\$size\_8\_k:\$line\_length:1:l_\-cache:il2_dl2\3\SE{};}}
\L{\LB{\N{\$params}\{\S{}\3sim\-cache\3\SE{}\}[\N{2}]_=_\S{}\3\-cache:dl1_dl1:1:\$line\_length:\$size\_8\_k:l}}
\L{\LB{}\Tab{16}{\-cache:dl2_dl2:1:\$line\_length:\$size\_4\_meg:l_}}
\L{\LB{}\Tab{16}{\-cache:il1_il1:1:\$line\_length:\$size\_8\_k:l_\-cache:il2_dl2\3\SE{};}}
\L{\LB{\N{\$params}\{\S{}\3sim\-cache\3\SE{}\}[\N{3}]_=_\S{}\3\-cache:dl1_dl1:1:\$line\_length:\$size\_8\_k:l}}
\L{\LB{}\Tab{16}{\-cache:dl2_dl2:1:\$line\_length:\$size\_2\_meg:l}}
\L{\LB{}\Tab{16}{\-cache:il1_il1:1:\$line\_length:\$size\_8\_k:l_\-cache:il2_dl2\3\SE{};}}
\L{\LB{}}
\L{\LB{\N{\$params}\{\S{}\3sim\-bpred\3\SE{}\}[\N{0}]_=_\S{}\3\-bpred_bimod_\-bpred:bimod_512\3\SE{};}}
\L{\LB{\N{\$params}\{\S{}\3sim\-bpred\3\SE{}\}[\N{1}]_=_\S{}\3\-bpred_bimod_\-bpred:bimod_1024\3\SE{};}}
\L{\LB{\N{\$params}\{\S{}\3sim\-bpred\3\SE{}\}[\N{2}]_=_\S{}\3\-bpred_bimod_\-bpred:bimod_2048\3\SE{};}}
\L{\LB{}}
\L{\LB{\N{\$params}\{\S{}\3sim\-bpred\3\SE{}\}[\N{3}]_=_\S{}\3\-bpred_2lev_\-bpred:2lev_1_512_10_1\3\SE{};}}
\L{\LB{\N{\$params}\{\S{}\3sim\-bpred\3\SE{}\}[\N{4}]_=_\S{}\3\-bpred_2lev_\-bpred:2lev_1_1024_10_1\3\SE{};}}
\L{\LB{\N{\$params}\{\S{}\3sim\-bpred\3\SE{}\}[\N{5}]_=_\S{}\3\-bpred_2lev_\-bpred:2lev_1_2048_10_1\3\SE{};}}
\L{\LB{\N{\$params}\{\S{}\3sim\-bpred\3\SE{}\}[\N{6}]_=_\S{}\3\-bpred_2lev_\-bpred:2lev_1_4096_10_1\3\SE{};}}
\L{\LB{}}
\L{\LB{\K{if}_(\N{\$short}\V{\_run})}}
\L{\LB{\{}}
\L{\LB{\C{}}\Tab{8}{\#_reduce_the_number_of_items\CE{}}}
\L{\LB{}\Tab{8}{\N{\$max}\V{\_num\_items}_=_\N{32768};\C{}_\#_this_is_caled_down_from_(4096_*_1024)_ie_by_128\CE{}}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#_now_simulate_a_smaller_cache\CE{}}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\N{\$params}\{\S{}\3sim\-cache\3\SE{}\}[\N{0}]_=_\S{}\3\-cache:dl1_dl1:16:32:1:l}}
\L{\LB{}\Tab{24}{\-cache:dl2_dl2:256:32:1:l_\-cache:il1_il1:16:32:1:l}}
\L{\LB{}\Tab{24}{\-cache:il2_il2:256:32:1:l\3\SE{};_}}
\L{\LB{}\Tab{8}{\N{\$params}\{\S{}\3sim\-cache\3\SE{}\}[\N{1}]_=_\S{}\3\-cache:dl1_dl1:16:32:1:l_}}
\L{\LB{}\Tab{24}{\-cache:dl2_dl2:512:32:1:l_\-cache:il1_il1:16:32:1:l}}
\L{\LB{}\Tab{24}{\-cache:il2_il2:512:32:1:l\3\SE{};}}
\L{\LB{}\Tab{8}{\N{\$params}\{\S{}\3sim\-cache\3\SE{}\}[\N{2}]_=_\S{}\3\-cache:dl1_dl1:1:32:16:l}}
\L{\LB{}\Tab{24}{\-cache:dl2_dl2:1:32:256:l_\-cache:il1_il1:16:32:1:l}}
\L{\LB{}\Tab{24}{\-cache:il2_il2:1:32:256:l\3\SE{};}}
\L{\LB{}\Tab{8}{\N{\$params}\{\S{}\3sim\-cache\3\SE{}\}[\N{3}]_=_\S{}\3\-cache:dl1_dl1:1:32:16:l_}}
\L{\LB{}\Tab{24}{\-cache:dl2_dl2:1:32:512:l_\-cache:il1_il1:16:32:1:l}}
\L{\LB{}\Tab{24}{\-cache:il2_il2:1:32:512:l\3\SE{};}}
\L{\LB{}\Tab{8}{}}
\L{\LB{\}}}
\L{\LB{}}
\L{\LB{\N{\$number}\V{\_of\_items}_=_\N{\$min}\V{\_num\_items};}}
\L{\LB{}}
\L{\LB{\K{while}(\N{\$number}\V{\_of\_items}_\<_\N{\$max}\V{\_num\_items})}}
\L{\LB{\{}}
\L{\LB{}\Tab{8}{\K{push}(@\V{ns},_\N{\$number}\V{\_of\_items});}}
\L{\LB{}\Tab{8}{\N{\$number}\V{\_of\_items}_*=_\N{2};}}
\L{\LB{\}}}
\L{\LB{\K{push}(@\V{ns},_\N{\$max}\V{\_num\_items});}}
\L{\LB{}}
\L{\LB{\N{\$$\ell$og}\V{\_directory}_=_\S{}\3./logs/\3\SE{};}}
\L{\LB{}}
\L{\LB{\C{}\#_compiler_settings\CE{}}}
\L{\LB{\N{\$CC}_=_\S{}\3sslittle\-na\-sstrix\-gcc\3\SE{};}}
\L{\LB{\N{\$CFLAGS}_=_\S{}\3\-Wall_\-O3_\-funroll\-loops_\-finline\-functions\3\SE{};}}
\L{\LB{\N{\$SIMPLEFLAGS}_=_\S{}\3\3\SE{};\C{}_\#-lm\CE{}}}
\L{\LB{}}
\L{\LB{\K{select}_\V{STDOUT};}}
\L{\LB{}}
\L{\LB{\N{\$dashes}_=_\S{}\3\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\2n\3\SE{};}}
\L{\LB{\C{}\#_each_sort,_do_a_cache_for_each_size,_then_a_bpred_for_each_size\CE{}}}
\L{\LB{}}
\L{\LB{}}
\L{\LB{\K{if}_(\N{\$just}\V{\_instruction})}}
\L{\LB{\{}}
\L{\LB{}\Tab{8}{\N{\$sortname}_=_\N{\$ARGV}[\N{0}];}}
\L{\LB{}\Tab{8}{@\V{seeds}_=_(_\S{}\30\3\SE{},_\S{}\320\3\SE{},_\S{}\31234\3\SE{},_\S{}\363345\3\SE{},_\S{}\323\3\SE{}_);}}
\L{\LB{\C{}}\Tab{8}{\#_we_max_out_at_32768_unless_you_specify_more_with_the_-m.\CE{}}}
\L{\LB{\C{}}\Tab{8}{\#_you_can_specify_less_with_the_-M\CE{}}}
\L{\LB{}\Tab{8}{\K{if}_(\N{\$max}\V{\_num\_items}_\>=_\N{32768})}}
\L{\LB{}\Tab{8}{\{}}
\L{\LB{}\Tab{16}{\N{\$max}\V{\_num\_items}_=_\N{32768};}}
\L{\LB{}\Tab{8}{\}}}
\L{\LB{}\Tab{8}{\K{if}_(\N{\$min}\V{\_num\_items}_\>_\N{\$max}\V{\_num\_items})}}
\L{\LB{}\Tab{8}{\{}}
\L{\LB{}\Tab{16}{\N{\$max}\V{\_num\_items}_=_\N{\$min}\V{\_num\_items};}}
\L{\LB{}\Tab{8}{\}}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\K{foreach}_\N{\$seed}_(@\V{seeds})}}
\L{\LB{}\Tab{8}{\{}}
\L{\LB{}\Tab{16}{@\V{instruction\_count}_=_();}}
\L{\LB{}\Tab{16}{\N{\$comp}\V{\_command}_=_\S{}\3\$CC_\$CFLAGS_\$SIMPLEFLAGS_\-funroll\-loops}}
\L{\LB{}\Tab{16}{\-finline\-functions_\-DRANDOM\_SIZE=\$max\_num\_items_\-DSEED=\$seed}}
\L{\LB{}\Tab{16}{\-DSORT=\$sortname_\$sortname.c_simpleMain.c_\-o_special\_file\3\SE{};}}
\L{\LB{\C{}}\Tab{16}{\#_run_the_command\CE{}}}
\L{\LB{\C{}}\Tab{16}{\#_capture_the_compiler_errors_(STDERR)\CE{}}}
\L{\LB{}\Tab{16}{\N{\$comp}\V{\_output}_=_{`}\N{\$comp}\V{\_command}_\N{2}\>\&\N{1}_\N{1}\>/\V{dev}/\V{null}{`};_}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{16}{\#_if_it_doesnt_compile_stop_and_print_out_errors\CE{}}}
\L{\LB{}\Tab{16}{\K{if}_(\N{\$comp}\V{\_output}_=\~{}_/./)}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{}\Tab{24}{\K{die}(\S{}\3This_command_returned_errors:}}
\L{\LB{}\Tab{32}{\2\3\$comp\_command\2\3\2n\$comp\_output\3\SE{});}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}\Tab{16}{\N{\$sim}\V{\_command}_=_\S{}\3sim\-fast_special\_file\3\SE{};}}
\L{\LB{}\Tab{16}{@\V{sim\_output}_=_{`}\N{\$sim}\V{\_command}_\N{2}\>\&\N{1}_\N{1}\>/\V{dev}/\V{null}{`};}}
\L{\LB{}}
\L{\LB{}\Tab{16}{@\V{instruction\_count}_=_\K{grep}(/\V{sim\_num\_insn}/,_@\V{sim\_output});}}
\L{\LB{}\Tab{16}{\K{print}_\N{\$instruction}\V{\_count}[\N{0}];}}
\L{\LB{}\Tab{8}{\}}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\K{system}(\S{}\3rm_special\_file\3\SE{});}}
\L{\LB{}\Tab{8}{\K{exit};}}
\L{\LB{\}}}
\L{\LB{}}
\L{\LB{}}
\L{\LB{\V{SORT}:_\K{foreach}_\N{\$sortname}_(@\V{ARGV})}}
\L{\LB{\{}}
\L{\LB{}\Tab{8}{\N{\$sortfi$\ell$e}_=_\N{\$sortname.int}(\K{rand}(\N{2147483648})).\S{}\3.c\3\SE{};}}
\L{\LB{}\Tab{8}{\N{\$object}\V{\_file}_=_\N{\$sortname.int}(\K{rand}(\N{2147483648}));}}
\L{\LB{}\Tab{8}{\K{system}(\S{}\3cp_\$sortname.c_\$sortfile\3\SE{});}}
\L{\LB{}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#_make_a_temp_file\CE{}}}
\L{\LB{}\Tab{8}{\N{\$n}\V{\_count}_=_\N{0};}}
\L{\LB{}\Tab{8}{\K{foreach}_\N{\$n}_(@\V{ns})\C{}_\#_ther_should_be_num\_sim\_runs_*_count(\$n)_columns.\CE{}}}
\L{\LB{}\Tab{8}{\{}}
\L{\LB{}\Tab{16}{\N{\$comp}\V{\_command}_=_\S{}\3\$CC_\$CFLAGS_\$SIMPLEFLAGS_\-DRANDOM\_SIZE=\$n_\-DSEED=0}}
\L{\LB{}\Tab{24}{\-DSORT=\$sortname_\$sortfile_simpleMain.c_\-o_\$object\_file\3\SE{};}}
\L{\LB{}}
\L{\LB{}\Tab{16}{\K{print}_\N{\$comp}\V{\_command}.\S{}\3\2n\3\SE{};}}
\L{\LB{}\Tab{16}{\K{push}_(@\V{command\_list},_\N{\$comp}\V{\_command});}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{16}{\#_run_the_command\CE{}}}
\L{\LB{\C{}}\Tab{16}{\#_capture_the_compiler_errors_(STDERR)\CE{}}}
\L{\LB{}\Tab{16}{\N{\$comp}\V{\_output}_=_{`}\N{\$comp}\V{\_command}_\N{2}\>\&\N{1}_\N{1}\>/\V{dev}/\V{null}{`};_}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{16}{\#_if_it_doesnt_compile_stop_and_print_out_errors\CE{}}}
\L{\LB{}\Tab{16}{\K{if}_(\N{\$comp}\V{\_output}_=\~{}_/./)}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{}\Tab{24}{\K{print}_\N{\$comp}\V{\_output};}}
\L{\LB{}\Tab{24}{\K{next}_\V{SORT};}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}}
\L{\LB{}\Tab{16}{\K{foreach}_\N{\$simu$\ell$ator}_(@\V{simulators})\C{}_\#_run_each_of_the_simulators\CE{}}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{}\Tab{24}{\N{\$order}\V{\_count}_=_\N{0};}}
\L{\LB{}\Tab{24}{\N{\$run}\V{\_count}_=_\N{0};}}
\L{\LB{}\Tab{24}{\K{foreach}_\N{\$param}_(@\{\N{\$params}\{\N{\$simu$\ell$ator}\}\})}}
\L{\LB{}\Tab{24}{\{}}
\L{\LB{}\Tab{32}{\N{\$sim}\V{\_command}_=_\S{}\3\$simulator_\$param_\$object\_file\3\SE{};}}
\L{\LB{}\Tab{32}{\K{push}_(@\V{command\_list},_\N{\$sim}\V{\_command});}}
\L{\LB{}\Tab{32}{\K{print}_\N{\$sim}\V{\_command}.\S{}\3\2n\3\SE{};}}
\L{\LB{}\Tab{32}{\K{if}_(\N{\$just}\V{\_list})_\{_\K{next};_\}_}}
\L{\LB{}}
\L{\LB{}\Tab{32}{@\V{sim\_output}_=_{`}\V{nice}_\-\N{19}_\N{\$sim}\V{\_command}_\N{2}\>\&\N{1}_\N{1}\>/\V{dev}/\V{null}{`};}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{32}{\#_ignore_the_headers_we_dont_want\CE{}}}
\L{\LB{}\Tab{32}{\K{while}(\N{\$$\ell$ine}_=_\K{shift}(@\V{sim\_output}))}}
\L{\LB{}\Tab{32}{\{}}
\L{\LB{}\Tab{40}{\K{if}_(\N{\$$\ell$ine}_=\~{}_/\V{sim}:_\2*\2*_\V{simulation}_\V{statistics}_\2*\2*/)}}
\L{\LB{}\Tab{48}{\{_\K{last};_\}}}
\L{\LB{}\Tab{40}{\K{if}_(\N{\$$\ell$ine}_=\~{}_/\V{fatal}/)}}
\L{\LB{}\Tab{48}{\{_\K{die}(\S{}\3Fatal_error_with_}}
\L{\LB{}\Tab{56}{command_\$sim\_command\3\SE{});_\}}}
\L{\LB{}\Tab{32}{\}}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{32}{\#_fill_the_array_with_data_in_the_correct_order\CE{}}}
\L{\LB{}\Tab{32}{\K{while}(\K{shift}(@\V{sim\_output})_=\~{}_/(\2\V{S}+)\2\K{s}+(\2\V{S}+).*/)_}}
\L{\LB{}\Tab{32}{\{}}
\L{\LB{\C{}}\Tab{40}{\#_once_for_each_simulator\CE{}}}
\L{\LB{}\Tab{40}{\K{if}_(!(\N{\$resu$\ell$ts}\{\N{\$simu$\ell$ator}\}\{\N{\$1}\}))_}}
\L{\LB{}\Tab{40}{\{}}
\L{\LB{}\Tab{48}{\N{\$order}\{\N{\$simu$\ell$ator}\}[\N{\$order}\V{\_count}++]_=_\N{\$1};_}}
\L{\LB{}\Tab{40}{\}}}
\L{\LB{}\Tab{40}{@\{_\N{\$resu$\ell$ts}\{\N{\$simu$\ell$ator}\}\{\N{\$1}\}_\}[\N{\$n}\V{\_count}_*}}
\L{\LB{}\Tab{48}{\V{scalar}(@\{\N{\$params}\{\N{\$simu$\ell$ator}\}\})_+_\N{\$run}\V{\_count}]}}
\L{\LB{}\Tab{48}{=}\Tab{51}{\N{\$2};}}
\L{\LB{}\Tab{32}{\}}}
\L{\LB{}\Tab{32}{\N{\$run}\V{\_count}++;}}
\L{\LB{}\Tab{24}{\}}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}\Tab{16}{\N{\$n}\V{\_count}++;}}
\L{\LB{}\Tab{16}{\K{system}(\S{}\3rm_\-f_\$object\_file\3\SE{});}}
\L{\LB{}\Tab{8}{\}}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\K{if}_(\N{\$just}\V{\_list})_}}
\L{\LB{}\Tab{8}{\{}}
\L{\LB{}\Tab{16}{\K{system}(\S{}\3rm_\$sortfile\3\SE{});}}
\L{\LB{}\Tab{16}{\K{exit};}}
\L{\LB{}\Tab{8}{\}}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\K{push}_(@\V{my\_output},_\S{}\3\2n\$dashes_Results_for_\$sortname\2n\$dashes\3\SE{});}}
\L{\LB{}\Tab{8}{\K{foreach}_\N{\$simu$\ell$ator}_(@\V{simulators})}}
\L{\LB{}\Tab{8}{\{}}
\L{\LB{}\Tab{16}{@\V{output}_=_();}}
\L{\LB{}\Tab{16}{\K{for}_(\N{\$i}_=_\N{0};_\N{\$i}_\<_\V{scalar}(@\{\N{\$order}\{\N{\$simu$\ell$ator}\}\});_\N{\$i}++)}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{}\Tab{24}{\N{\$keyword}_=_\N{\$order}\{\N{\$simu$\ell$ator}\}[\N{\$i}];}}
\L{\LB{}\Tab{24}{\N{\$output}\V{\_string}_=_\K{sprintf}(\S{}\3\%\-36s_\3\SE{},_\N{\$keyword});}}
\L{\LB{}\Tab{24}{@\V{result\_array}_=_@\{_\N{\$resu$\ell$ts}\{\N{\$simu$\ell$ator}\}\{\N{\$keyword}\}_\};}}
\L{\LB{}\Tab{24}{\K{foreach}_\N{\$resu$\ell$t}_(@\V{result\_array})}}
\L{\LB{}\Tab{24}{\{}}
\L{\LB{}\Tab{32}{\K{if}_(\K{defined}(\N{\$resu$\ell$t}))_}}
\L{\LB{}\Tab{40}{\{_\N{\$output}\V{\_string}_.=_\K{sprintf}(\S{}\3\%13s_\|\3\SE{},_\N{\$resu$\ell$t});\}}}
\L{\LB{}\Tab{32}{\K{else}_\{_\N{\$output}\V{\_string}_.=_\S{}\3xxxxxxxxxxxxx_\|\3\SE{};_\}}}
\L{\LB{}\Tab{24}{\}}}
\L{\LB{}\Tab{24}{\N{\$output}\V{\_string}_.=_\S{}\3\2n\3\SE{};}}
\L{\LB{}\Tab{24}{\K{push}_(@\V{output},_\N{\$output}\V{\_string});}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}\Tab{16}{}}
\L{\LB{\C{}}\Tab{16}{\#_do_headers_here\CE{}}}
\L{\LB{}\Tab{16}{\N{\$header}_=_\S{}\3\$dashes\3\SE{};}}
\L{\LB{}\Tab{16}{\N{\$header}_.=_\K{sprintf}(\S{}\3\%\-36s_\3\SE{},_\N{\$simu$\ell$ator});}}
\L{\LB{}\Tab{16}{\K{foreach}_\N{\$n}_(@\V{ns})}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{}\Tab{24}{\K{foreach}_\N{\$param}_(@\{\N{\$params}\{\N{\$simu$\ell$ator}\}\})}}
\L{\LB{}\Tab{24}{\{}}
\L{\LB{}\Tab{32}{\N{\$header}_.=_\K{sprintf}(\S{}\3\%13s_\|\3\SE{},_\N{\$n});}}
\L{\LB{}\Tab{24}{\}}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}\Tab{16}{\K{foreach}_\N{\$param}_(@\{\N{\$params}\{\N{\$simu$\ell$ator}\}\})}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{}\Tab{24}{\N{\$header}_.=_\S{}\3\2n\$param\3\SE{};}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}\Tab{16}{\N{\$header}_.=_\S{}\3\2n\$dashes\3\SE{};}}
\L{\LB{}\Tab{16}{}}
\L{\LB{}\Tab{16}{\K{push}_(@\V{log\_output},_\N{\$header});}}
\L{\LB{}\Tab{16}{\K{push}_(@\V{log\_output},_@\V{output});}}
\L{\LB{}\Tab{16}{}}
\L{\LB{}\Tab{16}{\N{\$keyword}\V{\_string}_=_\K{join}_(\S{}\3\|\3\SE{},_@\{\N{\$keywords}\{\N{\$simu$\ell$ator}\}\});}}
\L{\LB{}\Tab{16}{@\V{temp}_=_\K{grep}_\{_/\N{\$keyword}\V{\_string}/;_\}_@\V{output};}}
\L{\LB{}\Tab{16}{}}
\L{\LB{}\Tab{16}{\K{push}_(@\V{my\_output},_\N{\$header});}}
\L{\LB{}\Tab{16}{\K{push}_(@\V{my\_output},_@\V{temp});}}
\L{\LB{}\Tab{16}{}}
\L{\LB{}\Tab{8}{\}}}
\L{\LB{}\Tab{8}{}}
\L{\LB{}\Tab{8}{}}
\L{\LB{\C{}}\Tab{8}{\#_we_store_the_complete_log\CE{}}}
\L{\LB{}\Tab{8}{\N{\$$\ell$ogname}_=_\S{}\3\$sortname\2\_\$comment\3\SE{};}}
\L{\LB{}\Tab{8}{\K{open}(\V{LOG},_\S{}\3\>\3\SE{}.\N{\$$\ell$og}\V{\_directory}.\N{\$$\ell$ogname});}}
\L{\LB{}\Tab{8}{\K{print}_\V{LOG}_\S{}\3\3\SE{}.\K{localtime}().\S{}\3\2n\3\SE{};}}
\L{\LB{}\Tab{8}{\K{print}_\V{LOG}_\S{}\3Run_as:_\2\3\$command\_line\2\3\2n\3\SE{};}}
\L{\LB{}\Tab{8}{\K{print}_\V{LOG}_@\V{log\_output};}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\K{print}_\V{LOG}_\S{}\3\2nCommand_list:_\2n\3\SE{};}}
\L{\LB{}\Tab{8}{\K{foreach}_\N{\$command}_(@\V{command\_list})}}
\L{\LB{}\Tab{8}{\{}}
\L{\LB{}\Tab{16}{\K{print}_\V{LOG}_\S{}\3\2t\3\SE{}.\N{\$command.}\S{}\3\2n\3\SE{};}}
\L{\LB{}\Tab{8}{\}}}
\L{\LB{}}
\L{\LB{}\Tab{8}{\K{close}(\V{LOG});}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#_remove_the_temp\CE{}}}
\L{\LB{}\Tab{8}{\K{system}(\S{}\3rm_\$sortfile\3\SE{});}}
\L{\LB{}}
\L{\LB{\}}}
\L{\LB{\K{print}_@\V{my\_output};}}
