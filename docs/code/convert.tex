% Remember to use the lgrind style

\Head{}
\File{convert}{2004}{4}{28}{4:01}{5059}
\L{\LB{\C{}\#!/usr/bin/perl_-w\CE{}}}
\L{\LB{\V{use}_\V{Getopt}::\V{Std};}}
\L{\LB{}}
\L{\LB{\V{my}_\%\V{options}=();}}
\L{\LB{\V{getopts}(\S{}\3hso\3\SE{},\2\%\V{options});}}
\L{\LB{}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3h\3\SE{}\})_\|\,\|_(\V{scalar}(@\V{ARGV})_==_\N{0}))}}
\L{\LB{\{}}
\L{\LB{}\Tab{8}{\K{die}(\S{}\3convert_[options]_filename\2noptions_are:\2n\2t\-h_\-_this_help_message\2n}}
\L{\LB{}\Tab{16}{\-s_\-_scale_numeric_results_by_the_number_of_keys_\2n}}
\L{\LB{}\Tab{16}{\-o_\-_offset_everything_from_do\_nothing\2n\3\SE{});}}
\L{\LB{\}}}
\L{\LB{}}
\L{\LB{\N{\$sca$\ell$e}_=_\N{0};}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3s\3\SE{}\}))_\{_\N{\$sca$\ell$e}_=_\N{1};_\}_}}
\L{\LB{}}
\L{\LB{\N{\$offset}_=_\N{0};}}
\L{\LB{\K{if}_(\K{defined}(\N{\$options}\{\S{}\3o\3\SE{}\}))_\{_\N{\$offset}_=_\N{1};_\}_}}
\L{\LB{}}
\L{\LB{\K{if}_(\N{\$offset})\C{}_\#_read_in_the_offset_results\CE{}}}
\L{\LB{\{}}
\L{\LB{}\Tab{8}{\N{\$argument}_=_\S{}\3logs/do\_nothing\_\3\SE{};}}
\L{\LB{}\Tab{8}{\K{unless}_(\-\V{e}_\N{\$argument})_\{_\K{die}(\S{}\3file_{'}\$argument{'}_does_not_exist\2n\3\SE{});_\}}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#get_the_actual_filename\CE{}}}
\L{\LB{}\Tab{8}{\N{\$fi$\ell$ename}_=_\S{}\3do\_nothing\3\SE{};}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#_parse_the_log\CE{}}}
\L{\LB{}\Tab{8}{\K{open}(\V{LOG},_\N{\$argument});}}
\L{\LB{}\Tab{8}{@\V{lines}_=_\<\V{LOG}\>;}}
\L{\LB{}\Tab{8}{\V{chomp}_@\V{lines};}}
\L{\LB{}\Tab{8}{\K{close}(\V{LOG});}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#_skip_date\CE{}}}
\L{\LB{}\Tab{8}{\K{shift}(@\V{lines});}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#_skip_\3run_as\3_and_line_of_dashes\CE{}}}
\L{\LB{}\Tab{8}{\K{shift}(@\V{lines});}}
\L{\LB{}\Tab{8}{\K{shift}(@\V{lines});}}
\L{\LB{}}
\L{\LB{}\Tab{8}{@\V{simulators}_=_();}}
\L{\LB{}\Tab{8}{\K{while}(@\V{lines})}}
\L{\LB{}\Tab{8}{\{}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{16}{\#_find_out_all_the_sizes_and_the_simulator_name\CE{}}}
\L{\LB{}\Tab{16}{\N{\$simu$\ell$ator}\V{\_sizes}_=_\K{shift}(@\V{lines});}}
\L{\LB{}\Tab{16}{\K{if}_(\N{\$simu$\ell$ator}\V{\_sizes}_\K{eq}_\S{}\3Command_list:_\3\SE{})_\{_\K{last};\}\C{}_\#_the_end\CE{}}}
\L{\LB{}\Tab{16}{\N{\$simu$\ell$ator}\V{\_sizes}_=\~{}_/(\2\V{S}+)\2\K{s}+(.*)/;}}
\L{\LB{}\Tab{16}{\N{\$simu$\ell$ator}_=_\N{\$1};}}
\L{\LB{}\Tab{16}{\K{push}_@\V{simulators},_\N{\$simu$\ell$ator};}}
\L{\LB{}}
\L{\LB{}\Tab{16}{@\V{sizes}_=_\K{split}(/\2\|/,_\N{\$2});}}
\L{\LB{}\Tab{16}{\K{foreach}_\N{\$size}_(@\V{sizes})_\{\N{\$size}_=\~{}_\K{s}/\2\K{s}//\V{g};\}\C{}_\#_remove_whitespace\CE{}}}
\L{\LB{}\Tab{16}{\%\V{seen}_=_();}}
\L{\LB{}\Tab{16}{@\V{sizes}_=_\K{grep}_\{_!_\N{\$seen}\{\N{\$}\V{\_}\}_++_\}_@\V{sizes};\C{}_\#_uniq_it\CE{}}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{16}{\#_get_the_parameters\CE{}}}
\L{\LB{}\Tab{16}{@\V{local\_params}_=_();}}
\L{\LB{}\Tab{16}{\K{while}(\N{\$}\V{\_}_=_\K{shift}(@\V{lines}))}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{}\Tab{24}{\K{if}_(\N{\$}\V{\_}_=\~{}_/\2\-\2\-/)_\{\K{last};\}}}
\L{\LB{}}
\L{\LB{}\Tab{24}{\K{push}_@\V{local\_params},_\N{\$}\V{\_};}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}\Tab{16}{@\{\N{\$params}\{\N{\$simu$\ell$ator}\}\}_=_@\V{local\_params};}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{16}{\#_get_the_results\CE{}}}
\L{\LB{}\Tab{16}{@\V{local\_keywords}_=_();}}
\L{\LB{}\Tab{16}{\K{while}(\N{\$}\V{\_}_=_\K{shift}(@\V{lines}))}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{}\Tab{24}{\K{if}_(\N{\$}\V{\_}_=\~{}_/\2\-\2\-/)_\{\K{last};\}\C{}_\#_seperator_is_-------------_etc\CE{}}}
\L{\LB{}\Tab{24}{\N{\$}\V{\_}_=\~{}_/(\2\V{S}+)\2\K{s}+(.*)/;}}
\L{\LB{}\Tab{24}{\N{\$keyword}_=_\N{\$1};}}
\L{\LB{}\Tab{24}{\K{push}_@\V{local\_keywords},_\N{\$keyword};\C{}_\#_save_it_for_later\CE{}}}
\L{\LB{}\Tab{24}{@\V{local\_results}_=_\K{split}(/\2\|/,_\N{\$2});}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{24}{\#_now_put_them_into_the_big_associative_array\CE{}}}
\L{\LB{}\Tab{24}{\K{foreach}_\N{\$n}_(@\V{sizes})}}
\L{\LB{}\Tab{24}{\{}}
\L{\LB{}\Tab{32}{\K{foreach}_\N{\$param}_(@\V{local\_params})}}
\L{\LB{}\Tab{32}{\{}}
\L{\LB{}\Tab{40}{\N{\$resu$\ell$t}_=_\K{shift}(@\V{local\_results});}}
\L{\LB{}\Tab{40}{\K{if}_(\K{defined}(\N{\$resu$\ell$t}))}}
\L{\LB{}\Tab{40}{\{}}
\L{\LB{}\Tab{48}{\N{\$resu$\ell$t}_=\~{}_\K{s}/\2\K{s}//\V{g};\C{}_\#_remove_whitespace\CE{}}}
\L{\LB{}\Tab{48}{\K{if}_(!(\N{\$resu$\ell$t}_\K{eq}_\S{}\3xxxxxxxxxxxxx\3\SE{}))}}
\L{\LB{}\Tab{48}{\{}}
\L{\LB{}\Tab{56}{\N{\$nothing}\{\N{\$simu$\ell$ator}\}\{\N{\$param}\}\{\N{\$n}\}}}
\L{\LB{}\Tab{64}{\{\N{\$keyword}\}_=_\N{\$resu$\ell$t};}}
\L{\LB{}\Tab{48}{\}}}
\L{\LB{}\Tab{40}{\}}}
\L{\LB{}\Tab{32}{\}}}
\L{\LB{}\Tab{24}{\}}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}\Tab{16}{@\{\N{\$keywords}\{\N{\$simu$\ell$ator}\}\}_=_@\V{local\_keywords};}}
\L{\LB{}\Tab{8}{\}}}
\L{\LB{}}
\L{\LB{\}}}
\L{\LB{}}
\L{\LB{\C{}\#_start_to_actually_do_thing\CE{}}}
\L{\LB{\K{foreach}_\N{\$argument}_(@\V{ARGV})}}
\L{\LB{\{}}
\L{\LB{}\Tab{8}{\K{unless}_(\-\V{e}_\N{\$argument})_\{_\K{die}(\S{}\3file_{'}\$argument{'}_does_not_exist\2n\3\SE{});_\}}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#get_the_actual_filename\CE{}}}
\L{\LB{}\Tab{8}{@\V{path}_=_\K{split}(/\2//,_\N{\$argument});}}
\L{\LB{}\Tab{8}{\N{\$fi$\ell$ename}_=_\K{pop}(@\V{path});}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#_make_a_directory_for_the_logs\CE{}}}
\L{\LB{}\Tab{8}{\K{mkdir}_\S{}\3./gnuplot\_logs/\$filename\3\SE{};}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#_parse_the_log\CE{}}}
\L{\LB{}\Tab{8}{\K{open}(\V{LOG},_\N{\$argument});}}
\L{\LB{}\Tab{8}{@\V{lines}_=_\<\V{LOG}\>;}}
\L{\LB{}\Tab{8}{\V{chomp}_@\V{lines};}}
\L{\LB{}\Tab{8}{\K{close}(\V{LOG});}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#_skip_date\CE{}}}
\L{\LB{}\Tab{8}{\K{shift}(@\V{lines});}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{8}{\#_skip_\3run_as\3_and_line_of_dashes\CE{}}}
\L{\LB{}\Tab{8}{\K{shift}(@\V{lines});}}
\L{\LB{}\Tab{8}{\K{shift}(@\V{lines});}}
\L{\LB{}}
\L{\LB{}\Tab{8}{@\V{simulators}_=_();}}
\L{\LB{}\Tab{8}{\K{while}(@\V{lines})}}
\L{\LB{}\Tab{8}{\{}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{16}{\#_find_out_all_the_sizes_and_the_simulator_name\CE{}}}
\L{\LB{}\Tab{16}{\N{\$simu$\ell$ator}\V{\_sizes}_=_\K{shift}(@\V{lines});}}
\L{\LB{}\Tab{16}{\K{if}_(\N{\$simu$\ell$ator}\V{\_sizes}_\K{eq}_\S{}\3Command_list:_\3\SE{})_\{_\K{last};\}\C{}_\#_the_end\CE{}}}
\L{\LB{}\Tab{16}{\N{\$simu$\ell$ator}\V{\_sizes}_=\~{}_/(\2\V{S}+)\2\K{s}+(.*)/;}}
\L{\LB{}\Tab{16}{\N{\$simu$\ell$ator}_=_\N{\$1};}}
\L{\LB{}\Tab{16}{\K{push}_@\V{simulators},_\N{\$simu$\ell$ator};}}
\L{\LB{}}
\L{\LB{}\Tab{16}{@\V{sizes}_=_\K{split}(/\2\|/,_\N{\$2});}}
\L{\LB{}\Tab{16}{\K{foreach}_\N{\$size}_(@\V{sizes})_\{\N{\$size}_=\~{}_\K{s}/\2\K{s}//\V{g};\}\C{}_\#_remove_whitespace\CE{}}}
\L{\LB{}\Tab{16}{\%\V{seen}_=_();}}
\L{\LB{}\Tab{16}{@\V{sizes}_=_\K{grep}_\{_!_\N{\$seen}\{\N{\$}\V{\_}\}_++_\}_@\V{sizes};\C{}_\#_uniq_it\CE{}}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{16}{\#_get_the_parameters\CE{}}}
\L{\LB{}\Tab{16}{@\V{local\_params}_=_();}}
\L{\LB{}\Tab{16}{\K{while}(\N{\$}\V{\_}_=_\K{shift}(@\V{lines}))}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{}\Tab{24}{\K{if}_(\N{\$}\V{\_}_=\~{}_/\2\-\2\-/)_\{\K{last};\}}}
\L{\LB{}}
\L{\LB{}\Tab{24}{\K{push}_@\V{local\_params},_\N{\$}\V{\_};}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}\Tab{16}{@\{\N{\$params}\{\N{\$simu$\ell$ator}\}\}_=_@\V{local\_params};}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{16}{\#_get_the_results\CE{}}}
\L{\LB{}\Tab{16}{@\V{local\_keywords}_=_();}}
\L{\LB{}\Tab{16}{\K{while}(\N{\$}\V{\_}_=_\K{shift}(@\V{lines}))}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{}\Tab{24}{\K{if}_(\N{\$}\V{\_}_=\~{}_/\2\-\2\-/)_\{\K{last};\}\C{}_\#_seperator_is_-------------_etc\CE{}}}
\L{\LB{}\Tab{24}{\N{\$}\V{\_}_=\~{}_/(\2\V{S}+)\2\K{s}+(.*)/;}}
\L{\LB{}\Tab{24}{\N{\$keyword}_=_\N{\$1};}}
\L{\LB{}\Tab{24}{\K{push}_@\V{local\_keywords},_\N{\$keyword};\C{}_\#_save_it_for_later\CE{}}}
\L{\LB{}\Tab{24}{@\V{local\_results}_=_\K{split}(/\2\|/,_\N{\$2});}}
\L{\LB{}}
\L{\LB{\C{}}\Tab{24}{\#_now_put_them_into_the_big_associative_array\CE{}}}
\L{\LB{}\Tab{24}{\K{foreach}_\N{\$n}_(@\V{sizes})}}
\L{\LB{}\Tab{24}{\{}}
\L{\LB{}\Tab{32}{\K{foreach}_\N{\$param}_(@\V{local\_params})}}
\L{\LB{}\Tab{32}{\{}}
\L{\LB{}\Tab{40}{\N{\$resu$\ell$t}_=_\K{shift}(@\V{local\_results});}}
\L{\LB{}\Tab{40}{\K{if}_(\K{defined}(\N{\$resu$\ell$t}))}}
\L{\LB{}\Tab{40}{\{}}
\L{\LB{}\Tab{48}{\N{\$resu$\ell$t}_=\~{}_\K{s}/\2\K{s}//\V{g};\C{}_\#_remove_whitespace\CE{}}}
\L{\LB{}\Tab{48}{\K{if}_(!(\N{\$resu$\ell$t}_\K{eq}_\S{}\3xxxxxxxxxxxxx\3\SE{}))}}
\L{\LB{}\Tab{48}{\{}}
\L{\LB{}\Tab{56}{\N{\$resu$\ell$ts}\{\N{\$simu$\ell$ator}\}\{\N{\$param}\}\{\N{\$n}\}}}
\L{\LB{}\Tab{64}{\{\N{\$keyword}\}_=_\N{\$resu$\ell$t};}}
\L{\LB{}\Tab{48}{\}}}
\L{\LB{}\Tab{40}{\}}}
\L{\LB{}\Tab{32}{\}}}
\L{\LB{}\Tab{24}{\}}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}\Tab{16}{@\{\N{\$keywords}\{\N{\$simu$\ell$ator}\}\}_=_@\V{local\_keywords};}}
\L{\LB{}\Tab{8}{\}}}
\L{\LB{}\Tab{8}{\K{foreach}_\N{\$simu$\ell$ator}_(@\V{simulators})}}
\L{\LB{}\Tab{8}{\{}}
\L{\LB{\C{}\#}\Tab{16}{print_\3simulator_=_\$simulator\2n\3;\CE{}}}
\L{\LB{}\Tab{16}{\K{foreach}_\N{\$param}_(@\{\N{\$params}\{\N{\$simu$\ell$ator}\}\})}}
\L{\LB{}\Tab{16}{\{}}
\L{\LB{\C{}\#}\Tab{24}{print_\3param_=_\$param\2n\3;\CE{}}}
\L{\LB{}\Tab{24}{\N{\$comment}_=_\S{}\3\#set\_size\_in\_keys\3\SE{};}}
\L{\LB{}\Tab{24}{\N{\$output}_=_\S{}\3\3\SE{};}}
\L{\LB{}\Tab{24}{\K{foreach}_\N{\$n}_(@\V{sizes})}}
\L{\LB{}\Tab{24}{\{}}
\L{\LB{\C{}\#}\Tab{32}{print_\3n_=_\$n\2n\3;\CE{}}}
\L{\LB{}\Tab{32}{\N{\$output}_.=_\S{}\3\$n_\3\SE{};}}
\L{\LB{}\Tab{32}{\K{foreach}_\N{\$keyword}_(@\{\N{\$keywords}\{\N{\$simu$\ell$ator}\}\})}}
\L{\LB{}\Tab{32}{\{}}
\L{\LB{\C{}\#}\Tab{40}{print_\3keyword_=_\$keyword\2n\3;\CE{}}}
\L{\LB{}\Tab{40}{\N{\$resu$\ell$t}_=_\N{\$resu$\ell$ts}\{\N{\$simu$\ell$ator}\}\{\N{\$param}\}}}
\L{\LB{}\Tab{48}{\{\N{\$n}\}\{\N{\$keyword}\};}}
\L{\LB{}\Tab{40}{\K{if}_(\K{defined}(\N{\$resu$\ell$t}))}}
\L{\LB{}\Tab{40}{\{}}
\L{\LB{}\Tab{48}{\K{if}_(\N{\$n}_==_\N{\$sizes}[\N{0}])\C{}_\#_only_do_once\CE{}}}
\L{\LB{}\Tab{48}{\{}}
\L{\LB{}\Tab{56}{\N{\$comment}_.=_\S{}\3_\$keyword\3\SE{};}}
\L{\LB{}\Tab{48}{\}}}
\L{\LB{}\Tab{48}{\K{if}_(\N{\$offset}_\&\&_(!(\N{\$resu$\ell$t}_=\~{}_\K{m}/\2\V{D}/))_}}
\L{\LB{}\Tab{56}{\&\&_(!\N{\$argument}_=\~{}_/\V{do\_nothing}/))}}
\L{\LB{}\Tab{48}{\{}}
\L{\LB{}\Tab{56}{\N{\$resu$\ell$t}_\-=_\N{\$nothing}\{\N{\$simu$\ell$ator}\}\{\N{\$param}\}}}
\L{\LB{}\Tab{80}{\{\N{\$n}\}\{\N{\$keyword}\};}}
\L{\LB{}\Tab{48}{\}}}
\L{\LB{}\Tab{48}{\K{if}_(\N{\$sca$\ell$e}_\&\&_(!(\N{\$resu$\ell$t}_=\~{}_\K{m}/\2\V{D}/)))}}
\L{\LB{}\Tab{48}{\{}}
\L{\LB{}\Tab{56}{\N{\$output}_.=_(\N{\$resu$\ell$t}/\N{\$n}).\S{}\3_\3\SE{};}}
\L{\LB{}\Tab{48}{\}}}
\L{\LB{}\Tab{48}{\K{else}}}
\L{\LB{}\Tab{48}{\{}}
\L{\LB{}\Tab{56}{\N{\$output}_.=_\S{}\3\$result_\3\SE{};}}
\L{\LB{}\Tab{48}{\}}}
\L{\LB{}}
\L{\LB{}\Tab{40}{\}}}
\L{\LB{}\Tab{32}{\}}}
\L{\LB{}\Tab{32}{\N{\$output}_.=_\S{}\3\2n\3\SE{};}}
\L{\LB{}\Tab{24}{\}}}
\L{\LB{}\Tab{24}{\N{\$param}_=\~{}_\K{s}/\2_/\V{\_}/\V{g};}}
\L{\LB{}\Tab{24}{\N{\$fu$\ell$$\ell$name}_=_\S{}\3\$filename\2\_\$simulator\2\_\$param\3\SE{};}}
\L{\LB{}\Tab{24}{\K{open}(\V{OUT},_\S{}\3\>_./gnuplot\_logs/\$filename/\$fullname\3\SE{});}}
\L{\LB{}\Tab{24}{\K{print}_\V{OUT}_\N{\$comment.}\S{}\3\2n\3\SE{};}}
\L{\LB{}\Tab{24}{\K{print}_\V{OUT}_\N{\$output};}}
\L{\LB{}\Tab{24}{\K{close}(\V{OUT});}}
\L{\LB{}\Tab{16}{\}}}
\L{\LB{}\Tab{8}{\}}}
\L{\LB{\}}}
